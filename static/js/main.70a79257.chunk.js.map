{"version":3,"sources":["products.js","contexts/useCart.js","components/Cart.js","components/Header.js","components/Product.js","App.js","index.js","supermarket.svg"],"names":["sku","name","image_url","price","CartContext","createContext","useCart","useContext","initialState","cart","reducer","state","type","payload","products","find","p","indexInCart","findIndex","newCart","splice","CartProvider","children","useReducer","dispatch","groupCartItems","reduce","product","quantity","push","Provider","value","addItem","removeItem","emptyCart","cartGroupedByItems","countItemsInCart","filter","length","totalPrice","Cart","className","map","index","key","src","alt","width","onClick","Header","modalRef","useRef","useState","isOpen","setIsOpen","useOnClickOutside","CartIcon","ref","style","display","Product","App","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.70a79257.chunk.js","sourcesContent":["// hard coding in products right here. you would most likely grab these from an api\nexport default [\n  {\n    sku: 123,\n    name: 'Occupy Mars Shirt',\n    image_url: 'https://i.imgur.com/dHzSCmK.png',\n    price: 20,\n  },\n  {\n    sku: 456,\n    name: 'Starman Shirt',\n    image_url: 'https://i.imgur.com/uKxQCRX.png',\n    price: 30,\n  },\n  {\n    sku: 789,\n    name: 'Crew Dragon Shirt',\n    image_url: 'https://i.imgur.com/5X6jmXs.png',\n    price: 40,\n  },\n  {\n    sku: 1011,\n    name: 'Ripley Shirt',\n    image_url: 'https://i.imgur.com/eeZ3FQE.png',\n    price: 50,\n  },\n];\n","import React, { createContext, useReducer, useContext} from \"react\";\r\nimport products from \"../products\";\r\n\r\nconst CartContext = createContext();\r\nexport const useCart = () => useContext(CartContext);\r\n\r\nconst initialState = { cart: [] };\r\n\r\nfunction reducer(state, { type, payload }) {\r\n  switch (type) {\r\n    case 'ADD':\r\n      return {\r\n        ...state,\r\n        cart: [...state.cart, products.find((p) => p.sku === payload)]\r\n      };\r\n    case 'REMOVE':\r\n      const indexInCart = state.cart.findIndex((p) => p.sku === payload);\r\n      const newCart = [...state.cart];\r\n      newCart.splice(indexInCart, 1);\r\n      return { ...state, cart: newCart };\r\n    case 'EMPTY':\r\n      return { cart: [] };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function CartProvider({ children }) {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const addItem = (sku) => dispatch({ type: 'ADD', payload: sku });\r\n  const removeItem = (sku) => dispatch({ type: 'REMOVE', payload: sku });\r\n  const emptyCart = () => dispatch({ type: 'EMPTY' });\r\n\r\n  function countItemsInCart(sku) {\r\n    const itemsInCart = state.cart.filter((p) => p.sku === sku) ?? [];\r\n    return itemsInCart.length\r\n  }\r\n\r\n  function groupCartItems() {\r\n    return state.cart.reduce((newCart, product) => {\r\n      // check newCart for product\r\n      const indexInCart = newCart.findIndex(p => p.sku === product.sku);\r\n      const isInCart = indexInCart !== -1;\r\n\r\n      if (isInCart) {\r\n        newCart[indexInCart].quantity += 1;\r\n        return newCart\r\n      }\r\n\r\n      // if not in array, add it\r\n      newCart.push({ ...product, quantity: 1 });\r\n      return newCart;\r\n    }, [])\r\n\r\n  }\r\n\r\n  function totalPrice() {\r\n    return groupCartItems().reduce((totalPrice, product) => {\r\n      return totalPrice + product.price * product.quantity;\r\n    }, 0)\r\n  }\r\n\r\n  return (\r\n    <CartContext.Provider value={{\r\n      addItem,\r\n      removeItem,\r\n      emptyCart,\r\n      cart: state.cart,\r\n      cartGroupedByItems: groupCartItems(),\r\n      countItemsInCart,\r\n      totalPrice: totalPrice()\r\n    }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  )\r\n}","import React from 'react';\nimport { useCart } from '../contexts/useCart';\nimport products from '../products';\n\nexport default function Cart() {\n  const { addItem, removeItem, cartGroupedByItems, totalPrice } = useCart();\n  return (\n    <div className=\"cart\">\n      {/* show cart items here */}\n      {cartGroupedByItems.map((product, index) => (\n        <div className='cart-item' key={index}>\n          <img src={product.image_url} alt={product.name} width='100' />\n          <div className='content'>\n            <h3>{product.name}</h3>\n            <div className='cart-buttons'>\n              <button onClick={() => removeItem(product.sku)}>-</button>\n              <button>{product.quantity}</button>\n              <button onClick={() => addItem(product.sku)}>+</button>\n            </div>\n          </div>\n        </div>\n      ))}\n\n      <div className=\"total\">${totalPrice}</div>\n    </div>\n  );\n}\n","import React, { useState, useRef } from 'react';\nimport useOnClickOutside from 'use-onclickoutside';\nimport { useCart } from '../contexts/useCart';\nimport CartIcon from '../supermarket.svg';\nimport Cart from './Cart';\n\nexport default function Header() {\n  const { cart } = useCart();\n\n  const modalRef = useRef(null);\n  const [isOpen, setIsOpen] = useState(false);\n\n  useOnClickOutside(modalRef, () => setIsOpen(false));\n\n  return (\n    <header>\n      <div className=\"container\">\n        <div className=\"cart-button\">\n          <button onClick={() => setIsOpen(!isOpen)}>\n            <img src={CartIcon} width=\"30\" />({cart.length})\n          </button>\n        </div>\n        {/* show modal */}\n        <div className='cart-modal' ref={modalRef} style={{display: isOpen ? 'block' : 'none'}}>\n          <Cart/>\n        </div>\n      </div>\n    </header>\n  );\n}\n","import React from \"react\";\r\nimport { useCart } from '../contexts/useCart';\r\n\r\nexport default function Product({ product }) {\r\n  const { addItem, removeItem, countItemsInCart } = useCart();\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <img src={product.image_url} alt={product.name} />\r\n\r\n      <h3> {product.name}</h3>\r\n      <strong>{product.price}$</strong>\r\n\r\n      <div className=\"product-buttons\">\r\n        {countItemsInCart(product.sku) > 0 ? (\r\n          <button className=\"remove\" onClick={() => removeItem(product.sku)}>Remove</button>\r\n        ) : (\r\n          <div />\r\n        )}\r\n        <button className=\"add\" onClick={() => addItem(product.sku)}> Add to cart</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\nimport Header from './components/Header';\nimport products from './products';\nimport './App.css';\nimport { CartProvider } from './contexts/useCart';\nimport Product from './components/Product';\n\nexport default function App() {\n  return (\n    <CartProvider>\n      <div className=\"app\">\n        {/* header */}\n        <Header />\n\n        <main>\n          <div className=\"products-list\">\n            {products.map((product, index) =>(\n              <Product key={index} product={product} />\n            ))}\n          </div>\n        </main>\n      </div>\n    </CartProvider>\n\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","module.exports = __webpack_public_path__ + \"static/media/supermarket.cbe3a597.svg\";"],"sourceRoot":""}